@import "tailwindcss";

/**
 * MetaSAAS Design Tokens
 *
 * Architecture (3 layers, strict dependency direction):
 *
 *   Layer 3: COMPONENTS  — only use Tailwind utilities (bg-card, text-foreground, etc.)
 *   Layer 2: @theme      — tells Tailwind to generate utilities that reference CSS variables
 *   Layer 1: :root / .dark — provides the actual color values per theme
 *
 * How it works:
 *   - @theme registers tokens as var() references → Tailwind generates e.g.
 *     .bg-card { background-color: var(--color-card); }
 *   - :root defines the variable values for the light theme
 *   - :root.dark overrides them for the dark theme
 *   - Components never know which theme is active
 *
 * Adding a new theme = one new CSS block overriding the variables. Zero component changes.
 */

/* ── Layer 2: Tailwind token registration ──────────────────────
 *
 * @theme (without "inline") tells Tailwind about token names and
 * generates utility classes, but does NOT emit :root declarations.
 * The var() self-references make utilities resolve at runtime
 * against whatever :root (or :root.dark) defines.
 */
@theme {
  /* Base surfaces */
  --color-background: var(--color-background);
  --color-foreground: var(--color-foreground);
  --color-card: var(--color-card);
  --color-card-foreground: var(--color-card-foreground);
  --color-popover: var(--color-popover);
  --color-popover-foreground: var(--color-popover-foreground);

  /* Brand */
  --color-primary: var(--color-primary);
  --color-primary-foreground: var(--color-primary-foreground);
  --color-secondary: var(--color-secondary);
  --color-secondary-foreground: var(--color-secondary-foreground);

  /* Neutral */
  --color-muted: var(--color-muted);
  --color-muted-foreground: var(--color-muted-foreground);
  --color-accent: var(--color-accent);
  --color-accent-foreground: var(--color-accent-foreground);

  /* Semantic status */
  --color-destructive: var(--color-destructive);
  --color-destructive-foreground: var(--color-destructive-foreground);
  --color-success: var(--color-success);
  --color-success-foreground: var(--color-success-foreground);
  --color-warning: var(--color-warning);
  --color-warning-foreground: var(--color-warning-foreground);

  /* Borders & inputs */
  --color-border: var(--color-border);
  --color-input: var(--color-input);
  --color-ring: var(--color-ring);

  /* Sidebar */
  --color-sidebar: var(--color-sidebar);
  --color-sidebar-foreground: var(--color-sidebar-foreground);
  --color-sidebar-border: var(--color-sidebar-border);

  /* Chart / category — decorative palette for data viz, kanban columns, etc. */
  --color-chart-1: var(--color-chart-1);
  --color-chart-2: var(--color-chart-2);
  --color-chart-3: var(--color-chart-3);
  --color-chart-4: var(--color-chart-4);
  --color-chart-5: var(--color-chart-5);
  --color-chart-6: var(--color-chart-6);
}

/* Non-color tokens — these don't change per theme, so inline is fine */
@theme inline {
  --radius-sm: 0.25rem;
  --radius-md: 0.375rem;
  --radius-lg: 0.5rem;
}

/* ── Layer 1: Theme definitions ─────────────────────────────── */

/* Light theme (default) */
:root {
  color-scheme: light;

  --color-background: #ffffff;
  --color-foreground: #0f172a;
  --color-card: #ffffff;
  --color-card-foreground: #0f172a;
  --color-popover: #ffffff;
  --color-popover-foreground: #0f172a;

  --color-primary: #4f46e5;
  --color-primary-foreground: #ffffff;
  --color-secondary: #f1f5f9;
  --color-secondary-foreground: #1e293b;

  --color-muted: #f1f5f9;
  --color-muted-foreground: #64748b;
  --color-accent: #e0e7ff;
  --color-accent-foreground: #3730a3;

  --color-destructive: #dc2626;
  --color-destructive-foreground: #ffffff;
  --color-success: #16a34a;
  --color-success-foreground: #ffffff;
  --color-warning: #d97706;
  --color-warning-foreground: #ffffff;

  --color-border: #e2e8f0;
  --color-input: #e2e8f0;
  --color-ring: #4f46e5;

  --color-sidebar: #f8fafc;
  --color-sidebar-foreground: #0f172a;
  --color-sidebar-border: #e2e8f0;

  --color-chart-1: #3b82f6;
  --color-chart-2: #f59e0b;
  --color-chart-3: #10b981;
  --color-chart-4: #8b5cf6;
  --color-chart-5: #f43f5e;
  --color-chart-6: #06b6d4;
}

/* Dark theme (auto via prefers-color-scheme) */
@media (prefers-color-scheme: dark) {
  :root:not(.light) {
    color-scheme: dark;

    --color-background: #0f1117;
    --color-foreground: #e2e8f0;
    --color-card: #1a1d27;
    --color-card-foreground: #e2e8f0;
    --color-popover: #1e2130;
    --color-popover-foreground: #e2e8f0;

    --color-primary: #6366f1;
    --color-primary-foreground: #ffffff;
    --color-secondary: #1e2130;
    --color-secondary-foreground: #cbd5e1;

    --color-muted: #1e2130;
    --color-muted-foreground: #94a3b8;
    --color-accent: #252a3a;
    --color-accent-foreground: #a5b4fc;

    --color-destructive: #ef4444;
    --color-destructive-foreground: #ffffff;
    --color-success: #22c55e;
    --color-success-foreground: #ffffff;
    --color-warning: #f59e0b;
    --color-warning-foreground: #ffffff;

    --color-border: #2a2e3e;
    --color-input: #2a2e3e;
    --color-ring: #6366f1;

    --color-sidebar: #141620;
    --color-sidebar-foreground: #e2e8f0;
    --color-sidebar-border: #252a3a;

    --color-chart-1: #60a5fa;
    --color-chart-2: #fbbf24;
    --color-chart-3: #34d399;
    --color-chart-4: #a78bfa;
    --color-chart-5: #fb7185;
    --color-chart-6: #22d3ee;
  }
}

/* Dark theme (manual via .dark class on <html>) */
:root.dark {
  color-scheme: dark;

  --color-background: #0f1117;
  --color-foreground: #e2e8f0;
  --color-card: #1a1d27;
  --color-card-foreground: #e2e8f0;
  --color-popover: #1e2130;
  --color-popover-foreground: #e2e8f0;

  --color-primary: #6366f1;
  --color-primary-foreground: #ffffff;
  --color-secondary: #1e2130;
  --color-secondary-foreground: #cbd5e1;

  --color-muted: #1e2130;
  --color-muted-foreground: #94a3b8;
  --color-accent: #252a3a;
  --color-accent-foreground: #a5b4fc;

  --color-destructive: #ef4444;
  --color-destructive-foreground: #ffffff;
  --color-success: #22c55e;
  --color-success-foreground: #ffffff;
  --color-warning: #f59e0b;
  --color-warning-foreground: #ffffff;

  --color-border: #2a2e3e;
  --color-input: #2a2e3e;
  --color-ring: #6366f1;

  --color-sidebar: #141620;
  --color-sidebar-foreground: #e2e8f0;
  --color-sidebar-border: #252a3a;

  --color-chart-1: #60a5fa;
  --color-chart-2: #fbbf24;
  --color-chart-3: #34d399;
  --color-chart-4: #a78bfa;
  --color-chart-5: #fb7185;
  --color-chart-6: #22d3ee;
}

/* ── Global element styles ──────────────────────────────────── */

body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
    Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  background-color: var(--color-background);
  color: var(--color-foreground);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

::selection {
  background-color: var(--color-primary);
  color: var(--color-primary-foreground);
}

::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: var(--color-border);
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--color-muted-foreground);
}
